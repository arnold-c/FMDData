import{_ as a,c as t,o as i,aA as o}from"./chunks/framework.BSFqMKy6.js";const h=JSON.parse('{"title":"Additional Data Processing","description":"","frontmatter":{},"headers":[],"relativePath":"additional-processing.md","filePath":"additional-processing.md","lastUpdated":null}'),r={name:"additional-processing.md"};function s(n,e,l,d,c,p){return i(),t("div",null,e[0]||(e[0]=[o('<h1 id="Additional-Data-Processing" tabindex="-1">Additional Data Processing <a class="header-anchor" href="#Additional-Data-Processing" aria-label="Permalink to &quot;Additional Data Processing {#Additional-Data-Processing}&quot;">​</a></h1><p>This document outlines the additional data processing steps applied after the initial cleaning phase. This process is primarily for handling cumulative datasets, such as the NADCP reports, where data for a single year needs to be inferred. The process is orchestrated by the <code>scripts/icar-additional-processing.jl</code> script.</p><h3 id="Additional-Processing-Workflow" tabindex="-1">Additional Processing Workflow <a class="header-anchor" href="#Additional-Processing-Workflow" aria-label="Permalink to &quot;Additional Processing Workflow {#Additional-Processing-Workflow}&quot;">​</a></h3><p>The <code>scripts/icar-additional-processing.jl</code> script executes a series of steps to load cleaned data, infer yearly values from cumulative reports, add essential metadata, and combine datasets for further analysis.</p><p><strong>Step 1: Loading Cleaned Data</strong></p><ul><li>The script begins by loading the relevant cleaned CSV files from the <code>data/icar-seroprevalence/cleaned/</code> directory. For a given NADCP round, this typically includes data for consecutive years. For example, for &quot;NADCP 2&quot;, it loads the cleaned reports for 2021 and 2022.</li></ul><p><strong>Step 2: Inferring Later Year Values</strong></p><ul><li><p>For reports that provide cumulative data (e.g., the 2022 NADCP 2 report contains cumulative data for 2021 and 2022), the script infers the values for the most recent year.</p></li><li><p>This is achieved using the <code>infer_later_year_values</code> function from <code>src/icar-processing/icar-processing-functions.jl</code>.</p></li><li><p>The function works by subtracting the counts from the initial year&#39;s dataset (e.g., 2021) from the cumulative dataset (e.g., 2022).</p></li><li><p>After subtraction, it performs a series of corrections and recalculations:</p><ul><li><p>It recalculates the &quot;Total&quot; row for all count and percentage columns based on the new single-year values.</p></li><li><p>It recalculates the seroprevalence percentages for each state.</p></li></ul></li></ul><p><strong>Step 3: Adding Metadata</strong></p><ul><li><p>To enrich the data and provide essential context for analysis, several metadata columns are added to the dataframes using the <code>add_all_metadata!</code> function.</p></li><li><p>The following metadata are added:</p><ul><li><p><code>:sample_year</code>: The year(s) the samples were collected.</p></li><li><p><code>:report_year</code>: The year the report was published.</p></li><li><p><code>:round_name</code>: The name of the vaccination or testing round (e.g., &quot;NADCP 2&quot;).</p></li><li><p><code>:test_type</code>: The serological test used (e.g., &quot;SPCE&quot;).</p></li><li><p><code>:test_threshold</code>: The threshold for a positive result.</p></li></ul></li><li><p>This metadata is applied to the original cleaned dataframes, the newly inferred single-year dataframe, and the cumulative dataframes.</p></li></ul><p><strong>Step 4: Combining and Saving</strong></p><ul><li><p>The <code>combine_round_dfs</code> function is used to vertically concatenate the individual dataframes (e.g., the inferred 2022 data, the 2021 data, and the cumulative 2021/2022 data) into a single, comprehensive DataFrame for that round.</p></li><li><p>The final processed DataFrames (both individual years and the combined set) are saved as new CSV files in the <code>data/icar-seroprevalence/processed/</code> directory.</p></li></ul><h3 id="Summary" tabindex="-1">Summary <a class="header-anchor" href="#Summary" aria-label="Permalink to &quot;Summary {#Summary}&quot;">​</a></h3><p>The additional processing workflow serves two main purposes:</p><ol><li><p><strong>Derives Single-Year Data</strong>: It extracts single-year statistics from cumulative reports, which is crucial for longitudinal analysis.</p></li><li><p><strong>Enriches Data</strong>: It adds critical metadata to the datasets, making them self-contained and analysis-ready.</p></li></ol><p>This ensures that the final processed data is accurate, consistent, and ready for use in modeling and visualization.</p>',16)]))}const f=a(r,[["render",s]]);export{h as __pageData,f as default};
